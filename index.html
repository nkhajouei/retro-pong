<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.5">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6d7378; -webkit-text-stroke: #6d7378}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 16.0px}
    span.s1 {font-kerning: none; background-color: #171818}
    span.s2 {font-kerning: none; color: #8cd3fe; background-color: #171818; -webkit-text-stroke: 0px #8cd3fe}
    span.s3 {font-kerning: none; color: #6d6d6d; background-color: #171818; -webkit-text-stroke: 0px #6d6d6d}
    span.s4 {font-kerning: none; color: #cacaca; background-color: #171818; -webkit-text-stroke: 0px #cacaca}
    span.s5 {font-kerning: none; color: #c27e65; background-color: #171818; -webkit-text-stroke: 0px #c27e65}
    span.s6 {font-kerning: none; color: #4689cc; background-color: #171818; -webkit-text-stroke: 0px #4689cc}
    span.s7 {font-kerning: none; color: #d4d4d4; background-color: #171818; -webkit-text-stroke: 0px #d4d4d4}
    span.s8 {font-kerning: none; color: #a7c598; background-color: #171818; -webkit-text-stroke: 0px #a7c598}
    span.s9 {font-kerning: none; color: #71c083; background-color: #171818; -webkit-text-stroke: 0px #71c083}
    span.s10 {font-kerning: none; color: #6d7378; background-color: #171818; -webkit-text-stroke: 0px #6d7378}
    span.s11 {font-kerning: none}
    span.s12 {font-kerning: none; color: #b76ff7; background-color: #171818; -webkit-text-stroke: 0px #b76ff7}
    span.s13 {font-kerning: none; color: #f67c30; background-color: #171818; -webkit-text-stroke: 0px #f67c30}
    span.s14 {font-kerning: none; color: #36c0a0; background-color: #171818; -webkit-text-stroke: 0px #36c0a0}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE</span><span class="s2"> html</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">html</span><span class="s4"> </span><span class="s2">lang</span><span class="s3">=</span><span class="s5">"en"</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s1">charset</span><span class="s3">=</span><span class="s5">"UTF-8"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">meta</span><span class="s4"> </span><span class="s2">name</span><span class="s3">=</span><span class="s1">"viewport"</span><span class="s4"> </span><span class="s2">content</span><span class="s3">=</span><span class="s1">"width=device-width, initial-scale=1.0"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">title</span><span class="s3">&gt;</span><span class="s1">Retro Paddle Ball</span><span class="s3">&lt;/</span><span class="s6">title</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">script</span><span class="s4"> </span><span class="s2">src</span><span class="s3">=</span><span class="s1">"https://cdn.tailwindcss.com"</span><span class="s3">&gt;&lt;/</span><span class="s6">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">body</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">display:</span><span class="s1"> </span><span class="s5">flex</span><span class="s7">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">justify-content:</span><span class="s4"> </span><span class="s5">center</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">align-items:</span><span class="s1"> </span><span class="s5">center</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">min-height:</span><span class="s1"> </span><span class="s8">100vh</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s4"> #1a1a1a</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* Dark background for a retro feel */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin:</span><span class="s1"> </span><span class="s8">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s1"> </span><span class="s9">'Courier New'</span><span class="s7">,</span><span class="s1"> </span><span class="s5">Courier</span><span class="s7">,</span><span class="s1"> </span><span class="s5">monospace</span><span class="s7">;</span><span class="s1"> </span><span class="s10">/* Retro font */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s1"> #fff</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">overflow:</span><span class="s4"> </span><span class="s5">hidden</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* Prevent scrollbars if canvas is slightly too big */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">#gameContainer</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">display:</span><span class="s1"> </span><span class="s5">flex</span><span class="s7">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">flex-direction:</span><span class="s4"> </span><span class="s5">column</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">align-items:</span><span class="s1"> </span><span class="s5">center</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s8">2px</span><span class="s1"> </span><span class="s5">solid</span><span class="s1"> #333</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s8">20px</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s1"> #0d0d0d</span><span class="s7">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s8">10px</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">box-shadow:</span><span class="s4"> </span><span class="s8">0</span><span class="s4"> </span><span class="s8">0</span><span class="s4"> </span><span class="s8">20px</span><span class="s4"> </span><span class="s5">rgba(</span><span class="s8">0</span><span class="s7">,</span><span class="s4"> </span><span class="s8">255</span><span class="s7">,</span><span class="s4"> </span><span class="s8">0</span><span class="s7">,</span><span class="s4"> </span><span class="s8">0.3</span><span class="s5">)</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* Greenish retro glow */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">canvas</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s1"> #000</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">display:</span><span class="s4"> </span><span class="s5">block</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* Removes extra space below canvas */</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s4"> </span><span class="s8">2px</span><span class="s4"> </span><span class="s5">solid</span><span class="s4"> #0f0</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* Bright green border for the game area */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">max-width:</span><span class="s1"> </span><span class="s8">100%</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">max-height:</span><span class="s4"> </span><span class="s8">80vh</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* Limit height to prevent excessive vertical space */</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">aspect-ratio:</span><span class="s4"> </span><span class="s8">4</span><span class="s4"> </span><span class="s7">/</span><span class="s4"> </span><span class="s8">3</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* Common old TV aspect ratio */</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s8">5px</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">#controlsInfo</span><span class="s7">,</span><span class="s4"> </span><span class="s1">#scoreBoard</span><span class="s7">,</span><span class="s4"> </span><span class="s1">#messageArea</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin-top:</span><span class="s1"> </span><span class="s8">15px</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">font-size:</span><span class="s4"> </span><span class="s8">1em</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* Adjusted for better readability */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s1"> #0f0</span><span class="s7">;</span><span class="s1"> </span><span class="s10">/* Green text */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">text-align:</span><span class="s1"> </span><span class="s5">center</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">#controlsInfo</span><span class="s4"> </span><span class="s1">p</span><span class="s7">,</span><span class="s4"> </span><span class="s1">#scoreBoard</span><span class="s4"> </span><span class="s1">p</span><span class="s7">,</span><span class="s4"> </span><span class="s1">#messageArea</span><span class="s4"> </span><span class="s1">p</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin:</span><span class="s1"> </span><span class="s8">5px</span><span class="s1"> </span><span class="s8">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s6">.button</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s1"> #222</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s1"> #0f0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">border:</span><span class="s1"> </span><span class="s8">1px</span><span class="s1"> </span><span class="s5">solid</span><span class="s1"> #0f0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">padding:</span><span class="s1"> </span><span class="s8">8px</span><span class="s1"> </span><span class="s8">15px</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">margin:</span><span class="s1"> </span><span class="s8">10px</span><span class="s1"> </span><span class="s8">5px</span><span class="s7">;</span></p>
<p class="p2"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">border-radius:</span><span class="s4"> </span><span class="s8">5px</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">cursor:</span><span class="s1"> </span><span class="s5">pointer</span><span class="s7">;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">font-family:</span><span class="s4"> </span><span class="s9">'Courier New'</span><span class="s7">,</span><span class="s4"> </span><span class="s1">Courier</span><span class="s7">,</span><span class="s4"> </span><span class="s1">monospace</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-size:</span><span class="s1"> </span><span class="s8">0.9em</span><span class="s7">;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">transition:</span><span class="s4"> </span><span class="s1">background-color</span><span class="s4"> </span><span class="s8">0.3s</span><span class="s7">,</span><span class="s4"> </span><span class="s1">color</span><span class="s4"> </span><span class="s8">0.3s</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.button:hover</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">background-color:</span><span class="s1"> #0f0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">color:</span><span class="s1"> #000</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">.button:active</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">transform:</span><span class="s1"> </span><span class="s5">translateY(</span><span class="s8">1px</span><span class="s5">)</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">#messageArea</span><span class="s4"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-size:</span><span class="s1"> </span><span class="s8">1.2em</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s2">font-weight:</span><span class="s1"> </span><span class="s5">bold</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s2">min-height:</span><span class="s4"> </span><span class="s8">20px</span><span class="s7">;</span><span class="s4"> </span><span class="s1">/* Reserve space for messages */</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">style</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">head</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"gameContainer"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"rounded-lg shadow-lg"</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">h1</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-3xl font-bold text-green-400 mb-4"</span><span class="s3">&gt;</span><span class="s4">Retro Paddle Ball</span><span class="s3">&lt;/</span><span class="s6">h1</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">canvas</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"gameCanvas"</span><span class="s3">&gt;&lt;/</span><span class="s6">canvas</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"scoreBoard"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-lg"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s3">&gt;</span><span class="s1">Player 1: </span><span class="s3">&lt;</span><span class="s6">span</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"player1Score"</span><span class="s3">&gt;</span><span class="s1">0</span><span class="s3">&lt;/</span><span class="s6">span</span><span class="s3">&gt;</span><span class="s1"> - Player 2: </span><span class="s3">&lt;</span><span class="s6">span</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"player2Score"</span><span class="s3">&gt;</span><span class="s1">0</span><span class="s3">&lt;/</span><span class="s6">span</span><span class="s3">&gt;&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s1"> </span><span class="s2">id</span><span class="s3">=</span><span class="s5">"messageArea"</span><span class="s1"> </span><span class="s2">class</span><span class="s3">=</span><span class="s5">"text-xl h-8"</span><span class="s3">&gt;</span><span class="s1">Press Enter to Start</span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">div</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"controlsInfo"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"text-sm"</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s3">&gt;</span><span class="s1">Left Paddle: S (Up), X (Down)</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s3">&gt;</span><span class="s1">Right Paddle: J (Up), M (Down)</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s3">&lt;</span><span class="s6">p</span><span class="s3">&gt;</span><span class="s1">Start/Restart Ball: Enter</span><span class="s3">&lt;/</span><span class="s6">p</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p3"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s3">&lt;</span><span class="s6">button</span><span class="s4"> </span><span class="s2">id</span><span class="s3">=</span><span class="s1">"resetScoreButton"</span><span class="s4"> </span><span class="s2">class</span><span class="s3">=</span><span class="s1">"button"</span><span class="s3">&gt;</span><span class="s4">Reset Scores</span><span class="s3">&lt;/</span><span class="s6">button</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s6">div</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> canvas </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'gameCanvas'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> ctx </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">getContext</span><span class="s7">(</span><span class="s9">'2d'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> messageArea </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'messageArea'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> player1ScoreDisplay </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'player1Score'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> player2ScoreDisplay </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'player2Score'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> resetScoreButton </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'resetScoreButton'</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Game settings</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> paddleHeight </span><span class="s7">=</span><span class="s1"> </span><span class="s13">80</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> paddleWidth </span><span class="s7">=</span><span class="s1"> </span><span class="s13">10</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> ballRadius </span><span class="s7">=</span><span class="s1"> </span><span class="s13">7</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> initialBallSpeedMagnitude </span><span class="s7">=</span><span class="s1"> </span><span class="s13">2</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// MODIFIED: Slower initial speed</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> currentBallSpeedX </span><span class="s7">=</span><span class="s1"> initialBallSpeedMagnitude</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> currentBallSpeedY </span><span class="s7">=</span><span class="s1"> initialBallSpeedMagnitude</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> paddleSpeed </span><span class="s7">=</span><span class="s1"> </span><span class="s13">6</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s4"> maxBallSpeed </span><span class="s7">=</span><span class="s4"> </span><span class="s13">8</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// MODIFIED: Slightly reduced max speed</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s4"> speedIncrement </span><span class="s7">=</span><span class="s4"> </span><span class="s13">0.15</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// MODIFIED: Slower speed increment</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Paddle objects</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> paddle1 </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>x</span><span class="s7">:</span><span class="s1"> </span><span class="s13">10</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>y</span><span class="s7">:</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s1"> </span><span class="s7">-</span><span class="s1"> paddleHeight </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>width</span><span class="s7">:</span><span class="s1"> paddleWidth</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>height</span><span class="s7">:</span><span class="s1"> paddleHeight</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>dy</span><span class="s7">:</span><span class="s1"> </span><span class="s13">0</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">};</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> paddle2 </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>x</span><span class="s7">:</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">-</span><span class="s1"> paddleWidth </span><span class="s7">-</span><span class="s1"> </span><span class="s13">10</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>y</span><span class="s7">:</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s1"> </span><span class="s7">-</span><span class="s1"> paddleHeight </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>width</span><span class="s7">:</span><span class="s1"> paddleWidth</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>height</span><span class="s7">:</span><span class="s1"> paddleHeight</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>dy</span><span class="s7">:</span><span class="s1"> </span><span class="s13">0</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">};</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Ball object</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> ball </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>x</span><span class="s7">:</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>y</span><span class="s7">:</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>radius</span><span class="s7">:</span><span class="s1"> ballRadius</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>dx</span><span class="s7">:</span><span class="s1"> currentBallSpeedX</span><span class="s7">,</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>dy</span><span class="s7">:</span><span class="s1"> currentBallSpeedY</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">};</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> player1Score </span><span class="s7">=</span><span class="s1"> </span><span class="s13">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> player2Score </span><span class="s7">=</span><span class="s1"> </span><span class="s13">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> gameStarted </span><span class="s7">=</span><span class="s1"> </span><span class="s12">false</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">let</span><span class="s1"> ballInPlay </span><span class="s7">=</span><span class="s1"> </span><span class="s12">false</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// Key states</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">const</span><span class="s1"> keysPressed </span><span class="s7">=</span><span class="s1"> </span><span class="s7">{};</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Drawing Functions ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> drawPaddle</span><span class="s7">(</span><span class="s1">x</span><span class="s7">,</span><span class="s1"> y</span><span class="s7">,</span><span class="s1"> width</span><span class="s7">,</span><span class="s1"> height</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">fillStyle </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'#0f0'</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">fillRect</span><span class="s7">(</span><span class="s1">x</span><span class="s7">,</span><span class="s1"> y</span><span class="s7">,</span><span class="s1"> width</span><span class="s7">,</span><span class="s1"> height</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> drawBall</span><span class="s7">(</span><span class="s1">x</span><span class="s7">,</span><span class="s1"> y</span><span class="s7">,</span><span class="s1"> radius</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">beginPath</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">arc</span><span class="s7">(</span><span class="s1">x</span><span class="s7">,</span><span class="s1"> y</span><span class="s7">,</span><span class="s1"> radius</span><span class="s7">,</span><span class="s1"> </span><span class="s13">0</span><span class="s7">,</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s14">PI</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s13">2</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">fillStyle </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'#0f0'</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">fill</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">closePath</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> drawNet</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">beginPath</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">setLineDash</span><span class="s7">([</span><span class="s13">5</span><span class="s7">,</span><span class="s1"> </span><span class="s13">15</span><span class="s7">]);</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">moveTo</span><span class="s7">(</span><span class="s1">canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">,</span><span class="s1"> </span><span class="s13">0</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">lineTo</span><span class="s7">(</span><span class="s1">canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">,</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">strokeStyle </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'#333'</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">lineWidth </span><span class="s7">=</span><span class="s1"> </span><span class="s13">2</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">stroke</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">closePath</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">setLineDash</span><span class="s7">([]);</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Game Logic ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> resetBall</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ball</span><span class="s7">.</span><span class="s1">x </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ballInPlay </span><span class="s7">=</span><span class="s1"> </span><span class="s12">false</span><span class="s7">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">let</span><span class="s1"> angle </span><span class="s7">=</span><span class="s1"> </span><span class="s7">(</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s14">PI</span><span class="s1"> </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">)</span><span class="s1"> </span><span class="s7">-</span><span class="s1"> </span><span class="s7">(</span><span class="s14">Math</span><span class="s7">.</span><span class="s14">PI</span><span class="s1"> </span><span class="s7">/</span><span class="s1"> </span><span class="s13">4</span><span class="s7">);</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> direction </span><span class="s7">=</span><span class="s1"> </span><span class="s7">(</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s13">0.5</span><span class="s7">)</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s13">1</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s7">-</span><span class="s13">1</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>currentBallSpeedX </span><span class="s7">=</span><span class="s1"> initialBallSpeedMagnitude </span><span class="s7">*</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">cos</span><span class="s7">(</span><span class="s1">angle</span><span class="s7">)</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> direction</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// Use magnitude and angle</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>currentBallSpeedY </span><span class="s7">=</span><span class="s1"> initialBallSpeedMagnitude </span><span class="s7">*</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">sin</span><span class="s7">(</span><span class="s1">angle</span><span class="s7">);</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Ensure a minimum horizontal speed to prevent overly vertical movement</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">abs</span><span class="s7">(</span><span class="s1">currentBallSpeedX</span><span class="s7">)</span><span class="s1"> </span><span class="s7">&lt;</span><span class="s1"> initialBallSpeedMagnitude </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                 </span>currentBallSpeedX </span><span class="s7">=</span><span class="s1"> </span><span class="s7">(</span><span class="s1">initialBallSpeedMagnitude </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">)</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> direction</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ball</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">=</span><span class="s1"> currentBallSpeedX</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">=</span><span class="s1"> currentBallSpeedY</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageArea</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'Press Enter to Serve'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> updatePaddleMovement</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Left Paddle (Paddle 1)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">keysPressed</span><span class="s7">[</span><span class="s9">'s'</span><span class="s7">]</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> keysPressed</span><span class="s7">[</span><span class="s9">'S'</span><span class="s7">])</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>paddle1</span><span class="s7">.</span><span class="s1">y </span><span class="s7">-=</span><span class="s1"> paddleSpeed</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">keysPressed</span><span class="s7">[</span><span class="s9">'x'</span><span class="s7">]</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> keysPressed</span><span class="s7">[</span><span class="s9">'X'</span><span class="s7">])</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>paddle1</span><span class="s7">.</span><span class="s1">y </span><span class="s7">+=</span><span class="s1"> paddleSpeed</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Right Paddle (Paddle 2)</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">keysPressed</span><span class="s7">[</span><span class="s9">'j'</span><span class="s7">]</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> keysPressed</span><span class="s7">[</span><span class="s9">'J'</span><span class="s7">])</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>paddle2</span><span class="s7">.</span><span class="s1">y </span><span class="s7">-=</span><span class="s1"> paddleSpeed</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">keysPressed</span><span class="s7">[</span><span class="s9">'m'</span><span class="s7">]</span><span class="s1"> </span><span class="s7">||</span><span class="s1"> keysPressed</span><span class="s7">[</span><span class="s9">'M'</span><span class="s7">])</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>paddle2</span><span class="s7">.</span><span class="s1">y </span><span class="s7">+=</span><span class="s1"> paddleSpeed</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>paddle1</span><span class="s7">.</span><span class="s1">y </span><span class="s7">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">max</span><span class="s7">(</span><span class="s13">0</span><span class="s7">,</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">min</span><span class="s7">(</span><span class="s1">canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">-</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">height</span><span class="s7">,</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">y</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>paddle2</span><span class="s7">.</span><span class="s1">y </span><span class="s7">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">max</span><span class="s7">(</span><span class="s13">0</span><span class="s7">,</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">min</span><span class="s7">(</span><span class="s1">canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">-</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">height</span><span class="s7">,</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">y</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> updateBallPosition</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">ballInPlay</span><span class="s7">)</span><span class="s1"> </span><span class="s12">return</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ball</span><span class="s7">.</span><span class="s1">x </span><span class="s7">+=</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">dx</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">+=</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">dy</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">+</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius </span><span class="s7">&gt;</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">||</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">-</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">*=</span><span class="s1"> </span><span class="s7">-</span><span class="s13">1</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">+</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius </span><span class="s7">&gt;</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height</span><span class="s7">)</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">-</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">-</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">=</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Left paddle collision</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s13">0</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> </span><span class="s10">// Moving left</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">x </span><span class="s7">-</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius </span><span class="s7">&lt;</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">x </span><span class="s7">+</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">width </span><span class="s7">&amp;&amp;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s4">x </span><span class="s7">+</span><span class="s4"> ball</span><span class="s7">.</span><span class="s4">radius </span><span class="s7">&gt;</span><span class="s4"> paddle1</span><span class="s7">.</span><span class="s4">x </span><span class="s7">&amp;&amp;</span><span class="s4"> </span><span class="s1">// Ensures ball is somewhat overlapping horizontally</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">+</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius </span><span class="s7">&gt;</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">y </span><span class="s7">&amp;&amp;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">-</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius </span><span class="s7">&lt;</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">y </span><span class="s7">+</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">height</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">x </span><span class="s7">=</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">x </span><span class="s7">+</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">width </span><span class="s7">+</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// Prevent sticking</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">*=</span><span class="s1"> </span><span class="s7">-</span><span class="s13">1</span><span class="s7">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">abs</span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dx</span><span class="s7">)</span><span class="s1"> </span><span class="s7">&lt;</span><span class="s1"> maxBallSpeed</span><span class="s7">)</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">+=</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">sign</span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dx</span><span class="s7">)</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> speedIncrement</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// Only increase Y speed if it's not already too fast, and maintain its current direction</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">abs</span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dy</span><span class="s7">)</span><span class="s1"> </span><span class="s7">&lt;</span><span class="s1"> maxBallSpeed </span><span class="s7">&amp;&amp;</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">!==</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                     </span>ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">+=</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">sign</span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dy</span><span class="s7">)</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> speedIncrement </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// Y speed increases less</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">===</span><span class="s1"> </span><span class="s13">0</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">abs</span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dx</span><span class="s7">)</span><span class="s1"> </span><span class="s7">&lt;</span><span class="s1"> maxBallSpeed</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">// If ball is moving straight, add a bit of Y</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">+=</span><span class="s1"> speedIncrement </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s7">(</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s13">0.5</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s7">-</span><span class="s13">1</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s13">1</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">let</span><span class="s1"> deltaY </span><span class="s7">=</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">-</span><span class="s1"> </span><span class="s7">(</span><span class="s1">paddle1</span><span class="s7">.</span><span class="s1">y </span><span class="s7">+</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">height </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">);</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s4">dy </span><span class="s7">+=</span><span class="s4"> deltaY </span><span class="s7">*</span><span class="s4"> </span><span class="s13">0.1</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// MODIFIED: Reduced influence of paddle hit location on Y speed</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                 </span></span><span class="s1">// Clamp ball.dy to prevent extreme angles</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">max</span><span class="s7">(-</span><span class="s1">maxBallSpeed </span><span class="s7">*</span><span class="s1"> </span><span class="s13">0.75</span><span class="s7">,</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">min</span><span class="s7">(</span><span class="s1">maxBallSpeed </span><span class="s7">*</span><span class="s1"> </span><span class="s13">0.75</span><span class="s7">,</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">dy</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Right paddle collision</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">&gt;</span><span class="s1"> </span><span class="s13">0</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> </span><span class="s10">// Moving right</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">x </span><span class="s7">+</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius </span><span class="s7">&gt;</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">x </span><span class="s7">&amp;&amp;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">x </span><span class="s7">-</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius </span><span class="s7">&lt;</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">x </span><span class="s7">+</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">width </span><span class="s7">&amp;&amp;</span><span class="s1"> </span><span class="s10">// Ensures ball is somewhat overlapping horizontally</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">+</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius </span><span class="s7">&gt;</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">y </span><span class="s7">&amp;&amp;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">-</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius </span><span class="s7">&lt;</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">y </span><span class="s7">+</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">height</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">x </span><span class="s7">=</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">x </span><span class="s7">-</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// Prevent sticking</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">*=</span><span class="s1"> </span><span class="s7">-</span><span class="s13">1</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">abs</span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dx</span><span class="s7">)</span><span class="s1"> </span><span class="s7">&lt;</span><span class="s1"> maxBallSpeed</span><span class="s7">)</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">+=</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">sign</span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dx</span><span class="s7">)</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> speedIncrement</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">abs</span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dy</span><span class="s7">)</span><span class="s1"> </span><span class="s7">&lt;</span><span class="s1"> maxBallSpeed </span><span class="s7">&amp;&amp;</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">!==</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">+=</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">sign</span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dy</span><span class="s7">)</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> speedIncrement </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">===</span><span class="s1"> </span><span class="s13">0</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">abs</span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dx</span><span class="s7">)</span><span class="s1"> </span><span class="s7">&lt;</span><span class="s1"> maxBallSpeed</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                     </span>ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">+=</span><span class="s1"> speedIncrement </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> </span><span class="s7">(</span><span class="s14">Math</span><span class="s7">.</span><span class="s1">random</span><span class="s7">()</span><span class="s1"> </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s13">0.5</span><span class="s1"> </span><span class="s7">?</span><span class="s1"> </span><span class="s7">-</span><span class="s13">1</span><span class="s1"> </span><span class="s7">:</span><span class="s1"> </span><span class="s13">1</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">let</span><span class="s1"> deltaY </span><span class="s7">=</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">-</span><span class="s1"> </span><span class="s7">(</span><span class="s1">paddle2</span><span class="s7">.</span><span class="s1">y </span><span class="s7">+</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">height </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">+=</span><span class="s1"> deltaY </span><span class="s7">*</span><span class="s1"> </span><span class="s13">0.1</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// MODIFIED: Reduced influence</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">=</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">max</span><span class="s7">(-</span><span class="s1">maxBallSpeed </span><span class="s7">*</span><span class="s1"> </span><span class="s13">0.75</span><span class="s7">,</span><span class="s1"> </span><span class="s14">Math</span><span class="s7">.</span><span class="s1">min</span><span class="s7">(</span><span class="s1">maxBallSpeed </span><span class="s7">*</span><span class="s1"> </span><span class="s13">0.75</span><span class="s7">,</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">dy</span><span class="s7">));</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">x </span><span class="s7">+</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius </span><span class="s7">&lt;</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>player2Score</span><span class="s7">++;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>player2ScoreDisplay</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> player2Score</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>resetBall</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">x </span><span class="s7">-</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius </span><span class="s7">&gt;</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>player1Score</span><span class="s7">++;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>player1ScoreDisplay</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> player1Score</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>resetBall</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> gameLoop</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>ctx</span><span class="s7">.</span><span class="s1">clearRect</span><span class="s7">(</span><span class="s13">0</span><span class="s7">,</span><span class="s1"> </span><span class="s13">0</span><span class="s7">,</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width</span><span class="s7">,</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>drawNet</span><span class="s7">();</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>drawPaddle</span><span class="s7">(</span><span class="s1">paddle1</span><span class="s7">.</span><span class="s1">x</span><span class="s7">,</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">y</span><span class="s7">,</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">width</span><span class="s7">,</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">height</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>drawPaddle</span><span class="s7">(</span><span class="s1">paddle2</span><span class="s7">.</span><span class="s1">x</span><span class="s7">,</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">y</span><span class="s7">,</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">width</span><span class="s7">,</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">height</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>drawBall</span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">x</span><span class="s7">,</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">y</span><span class="s7">,</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">radius</span><span class="s7">);</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">gameStarted</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>updatePaddleMovement</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>updateBallPosition</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>requestAnimationFrame</span><span class="s7">(</span><span class="s1">gameLoop</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Event Listeners ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> handleKeyDown</span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span>keysPressed</span><span class="s7">[</span><span class="s4">e</span><span class="s7">.</span><span class="s4">key</span><span class="s7">.</span><span class="s4">toLowerCase</span><span class="s7">()]</span><span class="s4"> </span><span class="s7">=</span><span class="s4"> </span><span class="s12">true</span><span class="s7">;</span><span class="s4"> </span><span class="s1">// Store keys in lowercase for consistency</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">e</span><span class="s7">.</span><span class="s1">key </span><span class="s7">===</span><span class="s1"> </span><span class="s9">'Enter'</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">gameStarted</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>gameStarted </span><span class="s7">=</span><span class="s1"> </span><span class="s12">true</span><span class="s7">;</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                    </span></span><span class="s1">// ballInPlay = true; // Moved to after resetBall</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>messageArea</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s9">''</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>resetBall</span><span class="s7">();</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>ballInPlay </span><span class="s7">=</span><span class="s1"> </span><span class="s12">true</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">ballInPlay</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>ballInPlay </span><span class="s7">=</span><span class="s1"> </span><span class="s12">true</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span>messageArea</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s9">''</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s12">if</span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">dx </span><span class="s7">===</span><span class="s1"> </span><span class="s13">0</span><span class="s1"> </span><span class="s7">&amp;&amp;</span><span class="s1"> ball</span><span class="s7">.</span><span class="s1">dy </span><span class="s7">===</span><span class="s1"> </span><span class="s13">0</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span><span class="s1"> </span><span class="s10">// Check if ball speeds are zero</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                        </span>resetBall</span><span class="s7">();</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                    </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> handleKeyUp</span><span class="s7">(</span><span class="s1">e</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>keysPressed</span><span class="s7">[</span><span class="s1">e</span><span class="s7">.</span><span class="s1">key</span><span class="s7">.</span><span class="s1">toLowerCase</span><span class="s7">()]</span><span class="s1"> </span><span class="s7">=</span><span class="s1"> </span><span class="s12">false</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// Store keys in lowercase</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>resetScoreButton</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'click'</span><span class="s7">,</span><span class="s1"> </span><span class="s7">()</span><span class="s1"> </span><span class="s7">=&gt;</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>player1Score </span><span class="s7">=</span><span class="s1"> </span><span class="s13">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>player2Score </span><span class="s7">=</span><span class="s1"> </span><span class="s13">0</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>player1ScoreDisplay</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> player1Score</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>player2ScoreDisplay</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> player2Score</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>gameStarted </span><span class="s7">=</span><span class="s1"> </span><span class="s12">false</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// Stop game logic</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>messageArea</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'Press Enter to Start'</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>resetBall</span><span class="s7">();</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">});</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">        </span></span><span class="s1">// --- Initialization ---</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s12">function</span><span class="s1"> resizeCanvas</span><span class="s7">()</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> container </span><span class="s7">=</span><span class="s1"> document</span><span class="s7">.</span><span class="s1">getElementById</span><span class="s7">(</span><span class="s9">'gameContainer'</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> containerWidth </span><span class="s7">=</span><span class="s1"> container</span><span class="s7">.</span><span class="s1">clientWidth </span><span class="s7">-</span><span class="s1"> </span><span class="s13">40</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> aspectRatio </span><span class="s7">=</span><span class="s1"> </span><span class="s13">4</span><span class="s1"> </span><span class="s7">/</span><span class="s1"> </span><span class="s13">3</span><span class="s7">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">=</span><span class="s1"> containerWidth</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">=</span><span class="s1"> containerWidth </span><span class="s7">/</span><span class="s1"> aspectRatio</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">const</span><span class="s1"> maxHeight </span><span class="s7">=</span><span class="s1"> window</span><span class="s7">.</span><span class="s1">innerHeight </span><span class="s7">*</span><span class="s1"> </span><span class="s13">0.7</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(</span><span class="s1">canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">&gt;</span><span class="s1"> maxHeight</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">=</span><span class="s1"> maxHeight</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">=</span><span class="s1"> maxHeight </span><span class="s7">*</span><span class="s1"> aspectRatio</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>paddleHeight </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">/</span><span class="s1"> </span><span class="s13">7.5</span><span class="s7">;</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>paddle1</span><span class="s7">.</span><span class="s1">height </span><span class="s7">=</span><span class="s1"> paddleHeight</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>paddle2</span><span class="s7">.</span><span class="s1">height </span><span class="s7">=</span><span class="s1"> paddleHeight</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>paddle1</span><span class="s7">.</span><span class="s1">y </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s1"> </span><span class="s7">-</span><span class="s1"> paddle1</span><span class="s7">.</span><span class="s1">height </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>paddle2</span><span class="s7">.</span><span class="s1">x </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">-</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">width </span><span class="s7">-</span><span class="s1"> </span><span class="s13">10</span><span class="s7">;</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span>paddle2</span><span class="s7">.</span><span class="s1">y </span><span class="s7">=</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s1"> </span><span class="s7">-</span><span class="s1"> paddle2</span><span class="s7">.</span><span class="s1">height </span><span class="s7">/</span><span class="s1"> </span><span class="s13">2</span><span class="s7">;</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// Reset ball position and speed according to new canvas size</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">            </span></span><span class="s1">// but only if game is not actively in play or just started</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s12">if</span><span class="s1"> </span><span class="s7">(!</span><span class="s1">ballInPlay </span><span class="s7">||</span><span class="s1"> </span><span class="s7">!</span><span class="s1">gameStarted</span><span class="s7">)</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                 </span>resetBall</span><span class="s7">();</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span><span class="s1"> </span><span class="s12">else</span><span class="s1"> </span><span class="s7">{</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// If ball is in play, try to adjust its position proportionally</span></p>
<p class="p5"><span class="s4"><span class="Apple-converted-space">                </span></span><span class="s1">// This is a simple adjustment, might need refinement for perfect feel</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">x </span><span class="s7">=</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">x </span><span class="s7">/</span><span class="s1"> </span><span class="s7">(</span><span class="s1">canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> aspectRatio</span><span class="s7">))</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">width</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// old width was based on old aspect ratio logic</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">                </span>ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">=</span><span class="s1"> </span><span class="s7">(</span><span class="s1">ball</span><span class="s7">.</span><span class="s1">y </span><span class="s7">/</span><span class="s1"> </span><span class="s7">(</span><span class="s1">canvas</span><span class="s7">.</span><span class="s1">width </span><span class="s7">/</span><span class="s1"> aspectRatio </span><span class="s7">/</span><span class="s1"> aspectRatio</span><span class="s7">))</span><span class="s1"> </span><span class="s7">*</span><span class="s1"> canvas</span><span class="s7">.</span><span class="s1">height</span><span class="s7">;</span><span class="s1"> </span><span class="s10">// old height was based on old aspect ratio logic</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">            </span></span><span class="s7">}</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span></span><span class="s7">}</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>window</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'keydown'</span><span class="s7">,</span><span class="s1"> handleKeyDown</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>window</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'keyup'</span><span class="s7">,</span><span class="s1"> handleKeyUp</span><span class="s7">);</span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>window</span><span class="s7">.</span><span class="s1">addEventListener</span><span class="s7">(</span><span class="s9">'resize'</span><span class="s7">,</span><span class="s1"> resizeCanvas</span><span class="s7">);</span></p>
<p class="p6"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>resizeCanvas</span><span class="s7">();</span><span class="s1"><span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>messageArea</span><span class="s7">.</span><span class="s1">textContent </span><span class="s7">=</span><span class="s1"> </span><span class="s9">'Press Enter to Start'</span><span class="s7">;</span></p>
<p class="p6"><span class="s11"></span><br></p>
<p class="p4"><span class="s1"><span class="Apple-converted-space">        </span>gameLoop</span><span class="s7">();</span></p>
<p class="p1"><span class="s4"><span class="Apple-converted-space">    </span></span><span class="s3">&lt;/</span><span class="s1">script</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">body</span><span class="s3">&gt;</span></p>
<p class="p1"><span class="s3">&lt;/</span><span class="s1">html</span><span class="s3">&gt;</span></p>
<p class="p6"><span class="s11"></span><br></p>
</body>
</html>
